<!DOCTYPE html>
<html>
<head>
	<title>Jq</title>
	<meta charset="utf-8" >
	<script type="text/javascript" src="./js/jquery-3.1.0.min.js"></script>
	<!-- 加载JS脚本文件 -->
	<script type="text/javascript">
	var int;
	var pro_src=0;
	var src=0;
	img = Array('1.jpg', '2.jpg' ,'3.jpg')
	var victory = 0;
	var sum = 0;
	$(function(){
		$('#start').click(function(){
			start();
		})
		
	})
	// window.onload = function(){
	// 	document.getElementById('start').onclick = function(){
	// 		start();
	// 	}
	// 	// document.getElementById('victory').onclick = function(){
	// 	// 	victory();
		
	// 	// }

	// }
	function start(){
		var int = setInterval(function(){
		// var computer = document.getElementById('img_computer');
		src = Math.round(Math.random()*2);
		while(src == pro_src){
			src = Math.round(Math.random()*2);
		}
		pro_src = src;
		 
		$('#img_computer').attr('src',img[src]);

		},10)
		// $('#stop').click(function(){                   //这里有点BUG 不知道为什么再多几次点击开始再点VS的话记录会多出很多条
		// 	clearInterval(int);
		// 	stop();
		// })
		document.getElementById('stop').onclick = function(){
			clearInterval(int);
			stop();
		}
	}
	function fun1(){
		$('#vs').html('您的胜率为'+Math.round(victory/sum*100*100)/100+'%'+'<br>'+'你永远也赢不了爸爸我的哈哈');
		// document.getElementById('vs').innerHTML='您的胜率为'+Math.round(victory/sum*100*100)/100+'%'+'<br>'+'你永远也赢不了爸爸我的哈哈';
	}
	function check1(){
		$('#img_user').attr('src','1.jpg')
		// document.getElementById('img_user').src = '1.jpg';
		// var shitou = 1
		// alert(shitou);
	}
	function check2(){
		$('#img_user').attr('src','2.jpg')
		// document.getElementById('img_user').src = '2.jpg';
		// var jiandao = 1
		// alert(jiandao);
	}
	function check3(){
		$('#img_user').attr('src','3.jpg')
		// document.getElementById('img_user').src = '3.jpg';
	}

	function stop(){
		var me_arr = $('input[name="me"]');
		// var me_arr = document.getElementsByName('me');
		for (var i = 0; i < me_arr.length; i++) {
			if (me_arr[i].checked) {
				var me = me_arr[i].value;		
			}
		}
		if (me == 1) {
			var npc = Math.round(Math.random()*10+0.5);
			if (npc > 3) {
				npc = 3;
			}
		}
		if (me == 2) {
			var npc = Math.round(Math.random()*10+0.5);
			if (npc > 3) {
				npc = 1;
			}
		}
		if (me == 3) {
			var npc = Math.round(Math.random()*10+0.5);
			if (npc > 3) {
				npc = 2;
			}
		}
		$('#img_computer').attr('src',npc+'.jpg')
		// document.getElementById('img_computer').src = npc+'.jpg'

		var quan_arr = Array('','石头','剪刀', '布');
		if (me == npc) {
			$('#vs').html('你出'+quan_arr[me]+'，电脑出'+quan_arr[npc]+'。'+'<br>'+'结果为平')
			// document.getElementById('vs').innerHTML = '你出'+quan_arr[me]+'，电脑出'+quan_arr[npc]+'。'+'<br>'+'结果为平'
			var a = '你出'+quan_arr[me]+'，电脑出'+quan_arr[npc]+'。'+'<br>'+'结果为平';
			sum++;
			
		}else if(me == 1 && npc == 2 || me==2 && npc == 3 || me==3 && npc==1){
			$('#vs').html('你出'+quan_arr[me]+'，电脑出'+quan_arr[npc]+'。'+'<br>'+'结果为你赢了')
			// document.getElementById('vs').innerHTML = '你出'+quan_arr[me]+'，电脑出'+quan_arr[npc]+'。'+'<br>'+'结果为你赢了'
			var a  = '你出'+quan_arr[me]+'，电脑出'+quan_arr[npc]+'。'+'<br>'+'结果为你赢了'
			victory++;
			sum++;
		}else{
			$('#vs').html('你出'+quan_arr[me]+'，电脑出'+quan_arr[npc]+'。'+'<br>'+'结果为你输了')
			// document.getElementById('vs').innerHTML = '你出'+quan_arr[me]+'，电脑出'+quan_arr[npc]+'。'+'<br>'+'结果为你输了'
			var a  = '你出'+quan_arr[me]+'，电脑出'+quan_arr[npc]+'。'+'<br>'+'结果为你输了'
			sum++;
		}
		var date = new Date();
		// alert(date.setFullYear(,,))
		var b = $('#right_p').html();
		$('#right_p').html(b+'<p>'+Date()+'<br>'+a+'</p>'+'<br>');
		// var b = document.getElementById('right_p').innerHTML;
		// document.getElementById('right_p').innerHTML = b+'<p>'+Date()+'<br>'+a+'</p>'+'<br>';
	}
	

		
	
</script>
<style type="text/css">
.left{
	width: 79%;
	height: 800px;
	float: left;
	border: solid 1px #999; 
}
.right{
	width: 20%;
	height: 800px;
	float:right;
	border: solid 1px #999; 
}
.play_me{
	width: 40%;
	height: 800px;
	/*background: #999;*/
	float: left;
	text-align: center;
}
.vs {
	width: 20%;
	height: 800px;
	/*background: #777;*/
	float: left;
}
.cpu {
	width: 40%;
	height: 800px;
	/*background: #666;*/
	text-align: center;
	float: right;
}
.cpu img{
	margin-top: 100px;
}
.top img {
	margin-top:100px;
}
.play_me .end{
	width: 100%;
	height: 500px;
}
.vs{
	text-align: center;
}
.vs input{
	margin-top: 150px;
}
.right p{
	margin: 0px;
	font-size: 12px;
}


</style>
</head>
<body>
<div class="left">
	<div class="play_me">
		<div class="top">
			<img src="1.jpg" class="me_img" id="img_user">
		</div>
		<div class="end">
			<p>石头<input type="radio" value="1" name="me" checked="checked"  onclick="check1()" id="shitou" /></p>
			<p>剪刀<input type="radio" value="2"  name="me"  onclick="check2()" id="jiandao"/></p>
			<p>布<input type="radio" value="3"  name="me"  onclick="check3()" id="bu"/></p>
		</div>
	</div>
	<div class="vs">
		<input value="开始" type="button" class="vs_input" id="start" />
		<input value="VS" type="button" class="vs_input" id="stop" />
		<input value="查看胜率" type="button" class="vs_input" onclick="fun1()" />
		<p id="vs">请点VS对决</p>
	</div>
	<div class="cpu">
		<img src="1.jpg" id="img_computer">
	</div>
</div>
<div class="right">
	<p id="right_p"></p>
</div>
</body>
</html>